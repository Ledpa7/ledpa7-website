/* ProjectDetailModal.module.css */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    z-index: 2000;
    opacity: 0;
    transition: opacity 0.4s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
}

.overlay.visible {
    opacity: 1;
}

/* The expanding card container */
.modalCard {
    position: fixed;
    /* Fixed to animate from rect to fullscreen/centered */
    background: var(--surface-1);
    overflow: hidden;
    border-radius: 12px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    transform-origin: center center;
    /* Premium Smooth Motion (Apple-like) */
    transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    z-index: 2001;
    display: flex;
    flex-direction: column;
}

.modalCard.fullscreen {
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    border-radius: 0;
    transform: none !important;

    /* Enable scrolling on the container itself */
    overflow-y: auto !important;

    /* Hide Scrollbar here too if desired */
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.modalCard.fullscreen::-webkit-scrollbar {
    display: none;
}

/* Content Layout within Modal */
.modalContent {
    padding: 100px 40px;
    /* Added Top padding for visual balance since close btn is absolute */
    height: auto;
    /* Let it grow */
    overflow: visible;
    /* No internal scroll */
    max-width: 1200px;
    width: 100%;
    margin: 0 auto;

    /* Staggered entrance context */
    display: flex;
    flex-direction: column;
}

/* Old scrollbar hiding on content is no longer needed but kept for safety if rules cascade differently, 
   actually better to remove the specific webkit rule for .modalContent if we want clean css */

/* Children Animations: Cinematic Blur Reveal */
.title,
.meta,
.description,
.imageContainer,
.mediaContainer,
.videoGrid {
    opacity: 0;
    transform: translateY(20px);
    filter: blur(8px);
    /* Glassy reveal */
    transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.modalCard.fullscreen .title {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition-delay: 0.1s;
}

.modalCard.fullscreen .meta {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition-delay: 0.15s;
}

.modalCard.fullscreen .mediaContainer {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition-delay: 0.2s;
}

.modalCard.fullscreen .description {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition-delay: 0.25s;
}

.modalCard.fullscreen .videoGrid {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition-delay: 0.3s;
}

.mediaContainer {
    width: 100%;
    border-radius: 0;
    overflow: hidden;
    margin-bottom: 32px;
    /* Centers video if it shrinks due to max-height */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: 16px;
    min-height: 200px;
    /* Ensure it has height even if content loads late */
    background: var(--surface-2);
    /* Placeholder bg */
}

/* If video is loaded, remove min-height or bg constraints? No, video will fill it */
.mediaContainer video {
    background: black;
}

.projectVideo {
    max-width: 100%;
    max-height: 70vh;
    /* Prevents video from being too tall */
    width: auto;
    height: auto;
    display: block;
    object-fit: contain;
}

.imagePlaceholder {
    width: 100%;
    height: 400px;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 24px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.imagePlaceholder img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Cinematic Video Section */
.cinematicContainer {
    position: relative;
    width: 100%;
    height: 700px;
    overflow: hidden;
    background: #000;
    margin-bottom: 32px;
    border-radius: 12px;
}

.cinematicMainVideo {
    position: relative;
    display: block;
    width: auto;
    height: 100%;
    max-height: 700px;
    margin: 0 auto;
    z-index: 1;
}

/* Video Grid Styles */
.videoGrid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 4px;
    width: 100%;
    margin-top: 2rem;
}

.videoTile {
    aspect-ratio: 1 / 1;
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
}

.videoTile video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.closeButton {
    position: fixed;
    top: 24px;
    right: 24px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    color: white;
    font-size: 24px;
    cursor: pointer;
    z-index: 2005;
    /* Increase z-index to be safe above content */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s, opacity 0.4s ease 0.4s;
    /* Subtle fade in */
    opacity: 0;
}

.modalCard.fullscreen .closeButton {
    opacity: 1;
}

.closeButton:hover {
    background: rgba(255, 255, 255, 0.2);
}

.title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 16px;
    background: linear-gradient(to right, #fff, #888);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.meta {
    display: flex;
    gap: 16px;
    color: #ffffff;
    margin-bottom: 32px;
    font-size: 1rem;
}

.description {
    font-size: 0.95rem;
    line-height: 1.6;
    color: #ffffff;
    white-space: pre-line;
    margin-bottom: 40px;
}

/* --- Design Showcase Template Styles --- */
.designShowcase {
    display: flex;
    flex-direction: column;
    gap: 60px;
    padding-bottom: 80px;
}

.heroImageContainer {
    width: 100%;
    margin-bottom: 20px;
    border-radius: 4px;
    overflow: hidden;
}

.heroImage {
    width: 100%;
    height: auto;
    display: block;
    object-fit: contain;
    /* Full product view */
}

.designHeader {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
}

.bigTitle {
    font-size: 3rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    line-height: 1.1;
    background: linear-gradient(to right, #fff, #aaa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
}

.designMeta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.period {
    font-size: 1rem;
    color: var(--accent-primary);
    font-family: monospace;
}

.tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
}

.tagBadge {
    font-size: 0.8rem;
    padding: 4px 12px;
    border-radius: 100px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-secondary);
}

.designDescription {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--text-primary);
    white-space: pre-line;
    margin-top: 10px;
}

.imageStack {
    display: flex;
    flex-direction: column;
    gap: 40px;
    width: 100%;
}

.stackItem {
    width: 100%;
    /* Keep images within bounds but large */
    background: #000;
    border-radius: 8px;
    overflow: hidden;
}

.stackItem img {
    width: 100%;
    height: auto;
    display: block;
}

/* 
   --------------------------------------------------------------
   Mobile Optimization Overrides
   --------------------------------------------------------------
*/
@media (max-width: 768px) {
    .modalContent {
        padding: 80px 20px 40px;
    }

    .title {
        font-size: 1.8rem;
        word-break: keep-all;
    }

    .meta {
        font-size: 0.85rem;
        gap: 12px;
        flex-wrap: wrap;
    }

    .description {
        font-size: 0.875rem;
        margin-bottom: 30px;
    }

    /* Cinematic Video for Mobile (1:1 for LED project) */
    .cinematicContainer {
        height: auto;
        aspect-ratio: 1 / 1;
        margin-bottom: 24px;
    }

    .cinematicMainVideo {
        width: 100%;
        height: auto;
        max-height: none;
    }

    .imagePlaceholder {
        height: 250px;
    }

    .videoGrid {
        grid-template-columns: repeat(2, 1fr);
        gap: 2px;
    }

    /* Design Showcase Mobile */
    .bigTitle {
        font-size: 2rem;
    }

    .designDescription {
        font-size: 0.9rem;
        line-height: 1.6;
    }

    .designShowcase {
        gap: 40px;
    }

    .imageStack {
        gap: 20px;
    }

    .closeButton {
        top: 16px;
        right: 16px;
        width: 36px;
        height: 36px;
        font-size: 20px;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
    }
}